require=function e(t,i,n){function r(a,s){if(!i[a]){if(!t[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(o)return o(a,!0);var h=new Error("Cannot find module '"+a+"'");throw h.code="MODULE_NOT_FOUND",h}var f=i[a]={exports:{}};t[a][0].call(f.exports,function(e){var i=t[a][1][e];return r(i?i:e)},f,f.exports,e,t,i,n)}return i[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)r(n[a]);return r}({xdls:[function(e,t){"use strict";function i(e){if(this.origin=e.origin,this.path=e.path,this.ready=!1,this.queue=[],this.messageId=0,this.callbacks={},!this.origin||!this.path)throw new Error("XDLS needs both an origin and a path specified in the constructor options.");for(var t=0;t<r.length;++t)this[r[t]]=this._handleMethod.bind(this,r[t]);("undefined"==typeof e.init||e.init)&&this.init()}t.exports=i;var n="xdls:",r=["clear","getItem","key","keys","length","removeItem","setItem"];i.prototype.init=function(){var e=this;if(!e._iframe){if(!window.postMessage||!window.JSON)throw new Error("XDLS requires both postMossage and JSON support.");e._iframe=document.createElement("iframe"),e._iframe.id="xdls",e._iframe.style.cssText="width:1px; height:1px; display: none;",document.body.appendChild(e._iframe);var t=e._onLoaded.bind(e),i=e._onMessage.bind(e);if(window.addEventListener)e._iframe.addEventListener("load",t,!1),window.addEventListener("message",i,!1);else{if(!e._iframe.attachEvent)throw new Error("XDLS could not properly bind for event handling.");e._iframe.attachEvent("onload",t,!1),window.attachEvent("onmessage",i)}e._iframe.src=e.origin+e.path}},i.prototype._onLoaded=function(){var e=this;e.ready=!0;for(var t;t=e.queue.shift();)e._sendMessage(t)},i.prototype._handleMethod=function(){var e=this,t=Array.prototype.slice.call(arguments,0),i=t.shift(),n=null;e.init(),t.length&&"function"==typeof t[t.length-1]&&(n=t.pop());var r=++e.messageId;n&&(e.callbacks[r]=n);var o={id:r,method:i,arguments:t};e.ready?e._sendMessage(o):e.queue.push(o)},i.prototype._sendMessage=function(e){var t=this;t._iframe.contentWindow.postMessage(n+JSON.stringify(e),t.origin)},i.prototype._onMessage=function(e){var t=this;if(e.origin&&-1!==t.origin.indexOf(e.origin)&&e.data&&0===e.data.indexOf(n)){var i=JSON.parse(e.data.substring(n.length));t.callbacks[i.id]&&(i.error?t.callbacks[i.id](i):t.callbacks[i.id](null,i.result),delete t.callbacks[i.id])}}},{}]},{},[]);
//# sourceMappingURL=xdls-0.0.1.min.js.map