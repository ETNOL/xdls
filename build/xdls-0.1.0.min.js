require=function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var d="function"==typeof require&&require;if(!s&&d)return d(a,!0);if(o)return o(a,!0);var f=new Error("Cannot find module '"+a+"'");throw f.code="MODULE_NOT_FOUND",f}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){!function(){"use strict";n.digest=function(e){function t(e,t,n){return e&t|~e&n}function n(e,t,n){return e&n|t&~n}function i(e,t,n){return e^t^n}function r(e,t,n){return t^(e|~n)}function o(e){return[255&e,e>>>8&255,e>>>16&255,e>>>24&255]}function a(e,t,n,i,r,o,a,s){e[0]+=s(t[0],n[0],i[0])+w[r]+a,e[0]=e[0]<<o|e[0]>>>32-o,e[0]+=t[0]}var s,d,f,u,h,c,p,l,g,m,_,v,y,w,E;for(s=e.length,e.push(128),h=56-e.length&63,d=0;h>d;d++)e.push(0);for(o(8*s).forEach(function(t){e.push(t)}),[0,0,0,0].forEach(function(t){e.push(t)}),c=[1732584193],p=[4023233417],l=[2562383102],g=[271733878],d=0;d<e.length;d+=64){for(w=[],f=0;64>f;f+=4)u=d+f,w.push(e[u]|e[u+1]<<8|e[u+2]<<16|e[u+3]<<24);m=c[0],_=p[0],v=l[0],y=g[0],a(c,p,l,g,0,7,3614090360,t),a(g,c,p,l,1,12,3905402710,t),a(l,g,c,p,2,17,606105819,t),a(p,l,g,c,3,22,3250441966,t),a(c,p,l,g,4,7,4118548399,t),a(g,c,p,l,5,12,1200080426,t),a(l,g,c,p,6,17,2821735955,t),a(p,l,g,c,7,22,4249261313,t),a(c,p,l,g,8,7,1770035416,t),a(g,c,p,l,9,12,2336552879,t),a(l,g,c,p,10,17,4294925233,t),a(p,l,g,c,11,22,2304563134,t),a(c,p,l,g,12,7,1804603682,t),a(g,c,p,l,13,12,4254626195,t),a(l,g,c,p,14,17,2792965006,t),a(p,l,g,c,15,22,1236535329,t),a(c,p,l,g,1,5,4129170786,n),a(g,c,p,l,6,9,3225465664,n),a(l,g,c,p,11,14,643717713,n),a(p,l,g,c,0,20,3921069994,n),a(c,p,l,g,5,5,3593408605,n),a(g,c,p,l,10,9,38016083,n),a(l,g,c,p,15,14,3634488961,n),a(p,l,g,c,4,20,3889429448,n),a(c,p,l,g,9,5,568446438,n),a(g,c,p,l,14,9,3275163606,n),a(l,g,c,p,3,14,4107603335,n),a(p,l,g,c,8,20,1163531501,n),a(c,p,l,g,13,5,2850285829,n),a(g,c,p,l,2,9,4243563512,n),a(l,g,c,p,7,14,1735328473,n),a(p,l,g,c,12,20,2368359562,n),a(c,p,l,g,5,4,4294588738,i),a(g,c,p,l,8,11,2272392833,i),a(l,g,c,p,11,16,1839030562,i),a(p,l,g,c,14,23,4259657740,i),a(c,p,l,g,1,4,2763975236,i),a(g,c,p,l,4,11,1272893353,i),a(l,g,c,p,7,16,4139469664,i),a(p,l,g,c,10,23,3200236656,i),a(c,p,l,g,13,4,681279174,i),a(g,c,p,l,0,11,3936430074,i),a(l,g,c,p,3,16,3572445317,i),a(p,l,g,c,6,23,76029189,i),a(c,p,l,g,9,4,3654602809,i),a(g,c,p,l,12,11,3873151461,i),a(l,g,c,p,15,16,530742520,i),a(p,l,g,c,2,23,3299628645,i),a(c,p,l,g,0,6,4096336452,r),a(g,c,p,l,7,10,1126891415,r),a(l,g,c,p,14,15,2878612391,r),a(p,l,g,c,5,21,4237533241,r),a(c,p,l,g,12,6,1700485571,r),a(g,c,p,l,3,10,2399980690,r),a(l,g,c,p,10,15,4293915773,r),a(p,l,g,c,1,21,2240044497,r),a(c,p,l,g,8,6,1873313359,r),a(g,c,p,l,15,10,4264355552,r),a(l,g,c,p,6,15,2734768916,r),a(p,l,g,c,13,21,1309151649,r),a(c,p,l,g,4,6,4149444226,r),a(g,c,p,l,11,10,3174756917,r),a(l,g,c,p,2,15,718787259,r),a(p,l,g,c,9,21,3951481745,r),c[0]+=m,p[0]+=_,l[0]+=v,g[0]+=y}return E=[],o(c[0]).forEach(function(e){E.push(e)}),o(p[0]).forEach(function(e){E.push(e)}),o(l[0]).forEach(function(e){E.push(e)}),o(g[0]).forEach(function(e){E.push(e)}),E},n.digest_s=function(e){var t,i,r,e,o=[];for(t=0;t<e.length;t++)o.push(e.charCodeAt(t));return i=n.digest(o),r="",i.forEach(function(t){for(e=t.toString(16);e.length<2;)e="0"+e;r+=e}),r}}()},{}],xdls:[function(e,t){"use strict";function n(e){if(this.origin=e.origin,this.path=e.path,this.ready=!1,this.queue=[],this.messageId=0,this.callbacks={},!this.origin||!this.path)throw new Error("XDLS needs both an origin and a path specified in the constructor options.");for(var t=0;t<o.length;++t)this[o[t]]=this._handleMethod.bind(this,o[t]);("undefined"==typeof e.init||e.init)&&this.init()}t.exports=n;var i=e("md5"),r="xdls:",o=["clear","getItem","key","keys","length","removeItem","setItem"];n.prototype.init=function(){var e=this;if(!e._iframe){if(!window.postMessage||!window.JSON)throw new Error("XDLS requires both postMossage and JSON support.");var t=e._onLoaded.bind(e),n=e._onMessage.bind(e),r="xdls-"+i.digest_s(e.origin+e.path),o=document.getElementById(r);if(o?(e._iframe=o,e._iframe.dataset.loaded&&t()):(e._iframe=document.createElement("iframe"),e._iframe.id=r,e._iframe.dataset.origin=e.origin,e._iframe.dataset.path=e.path,e._iframe.style.cssText="width:1px; height:1px; display: none;",document.body.appendChild(e._iframe)),window.addEventListener)e._iframe.addEventListener("load",t,!1),window.addEventListener("message",n,!1);else{if(!e._iframe.attachEvent)throw new Error("XDLS could not properly bind for event handling.");e._iframe.attachEvent("onload",t,!1),window.attachEvent("onmessage",n)}o||(e._iframe.src=e.origin+e.path)}},n.prototype._onLoaded=function(){var e=this;e.ready=!0,e._iframe.dataset.loaded=!0;for(var t;t=e.queue.shift();)e._sendMessage(t)},n.prototype._handleMethod=function(){var e=this,t=Array.prototype.slice.call(arguments,0),n=t.shift(),i=null;e.init(),t.length&&"function"==typeof t[t.length-1]&&(i=t.pop());var r=++e.messageId;i&&(e.callbacks[r]=i);var o={id:r,method:n,arguments:t};e.ready?e._sendMessage(o):e.queue.push(o)},n.prototype._sendMessage=function(e){var t=this;t._iframe.contentWindow.postMessage(r+JSON.stringify(e),t.origin)},n.prototype._onMessage=function(e){var t=this;if(e.origin&&-1!==t.origin.indexOf(e.origin)&&e.data&&0===e.data.indexOf(r)){var n=JSON.parse(e.data.substring(r.length));t.callbacks[n.id]&&(n.error?t.callbacks[n.id](n):t.callbacks[n.id](null,n.result),delete t.callbacks[n.id])}}},{md5:1}]},{},[]);
//# sourceMappingURL=xdls-0.1.0.min.js.map